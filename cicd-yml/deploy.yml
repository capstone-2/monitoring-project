monitoring-deploy-job:
  stage: deploy
  variables:
    GIT_STRATEGY: none
  script:
  - echo $JOB_START
  - hostname -I
  - pwd
  - ls -al
    # "npm start!!!! 출력대신 서버에서 배포 작업 시행"
  - cd cloud-monitoring
  - pm2 stop cloud-monitoring
  - pm2 start server/server.js --name cloud-monitoring
  - pm2 save
  tags:
    # 10.100.22.34 서버에 설치된 project-runner의 tag명
    - monitoring-cicd
  only:
    # main branch에 변화가 생길때 해당 job을 실행
    # (pipline 구조상, test-ok job이 실행되어 dev -> main Merge Request가 실행되면 수행됨)
    - main